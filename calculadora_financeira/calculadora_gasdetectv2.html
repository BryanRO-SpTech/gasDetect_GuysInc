<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Financeira</title>
</head>
<body>
    
    <h1>Simulador Financeiro GasDetect</h1>
    <br><br>
    Qual é o custo médio de recuperação por incidente na sua indústria?
    
    <input type="number" id="ipt_custoPorUm">
    <br><br>
    Quantos incidentes com gases inflamáveis ocorrem, em média, por ano na sua indústria? 
    
    <input type="number" id="ipt_qtdIncidentes">
    <br><br>
    Quantas áreas criticas existem na sua indústria?
    
    <input type="number" id="ipt_areas">
    <br></br>
    Quantos metros quadrados aproximadamente cada área possui?
    
    <input type="number" id="ipt_metrosArea">
    <br><br>
    Quantos sensores você estaria disposto a instalar?
    
    <input type="number" id="ipt_sensores">
    <br><br>
    <button onclick="calcular()">Calcular</button>
    <div id="div_msg"></div>

    
</body>
</html>

<script>
    var economiaComSolucao = 0;
    var roi =0;
    var economiaComSolucaoCliente =0;
    function calcular(){
        var custoPorUmIncidente = Number(ipt_custoPorUm.value);
        var qtdIncidentes = Number(ipt_qtdIncidentes.value);
        var sensores = Number(ipt_sensores.value);
        var areas = Number(ipt_areas.value);
        var metrosArea = Number(ipt_metrosArea.value);

        
        //CUSTO POTENCIAL POR ANO É O VALOR GASTO COM UM INCIDENTE MULTIPLICADO PELO NUMERO DE INCIDENTES
        var custoPotencialPorAno = qtdIncidentes * custoPorUmIncidente;
        // 30 METROS QUADRADOS SÃO OS METROS QUE O SENSOR ALCANÇA MONITORAR
        var metrosCobertosPeloMq2 = 30;
        //O CALCULO DA QUANTIDADE DE SENSORES IDEAIS, É A AREA TOTAL A SER MONITORADA DIVIDIDA PELOS 30 METROS DO SENSOR
        //COM ESSES SENSORES SERIA DE 50% A REDUÇÃO DE CUSTOS COMO UM TOTAL
        var quantidadeSensoresIdeal = (areas * metrosArea) / metrosCobertosPeloMq2;

        //ESSA É A PORCENTAGEM DE REDUÇÃO DE CUSTO CALCULADA USANDO OS SENSORES QUE O USUARIO PRETENDIA USAR
        var porcentagemClienteSensores = sensores * 50 / quantidadeSensoresIdeal;
       
        //LIMITAMOS A PORCENTAGEM DESSA REDUÇÃO PARA FICAR ENTRE 0 A 50
        if(porcentagemClienteSensores > 50){
            porcentagemClienteSensores = 50;
        }else if (porcentagemClienteSensores < 0){
            porcentagemClienteSensores =0;
        }
        //CALCULANDO ECONOMIA COM 50% DE REDUÇÃO, NOSSA RECOMENDAÇÃO
        economiaComSolucao = custoPotencialPorAno * 0.5;
        //CALCULANDO ECONOMIA COM DE X%, CALCULADA COM OS VALORES INFORMADOS PELO CLIENTE
        economiaComSolucaoCliente = custoPotencialPorAno * (porcentagemClienteSensores/100);
        
        //PRECO ADICIONAL A NOSSA SOLUÇÃO COM O NUMERO DE SENSORES RECOMENDADOS
        //ASSUMIMOS QUE A CADA ADIÇÃO DE SENSOR SERÁ ADICIONADO 195 REAIS
        var precoAdicionalSensores = 195 * quantidadeSensoresIdeal;
        //PREÇO ADICIONAL A NOSSA SOLUÇÃO COM O NUMERO DE SENSORES INFORMADO PELO CLIENTE
        var precoAdicionalSensoresCliente = 195 * sensores;

        //CALCULANDO O CUSTO TOTAL DA SOLUÇÃO RECOMENDADA, ASSUMINDO O VALOR DA IMPLEMENTAÇÃO BASE COMO 10 MIL
        var custoSolucao = 10000 + precoAdicionalSensores;
        //CALCULANDO O CUSTO TOTAL DA SOLUÇÃO COM O NUMERO DE SENSORES INFORMADO PELO USUARIO
        var custoSolucaoCliente = 10000 + precoAdicionalSensoresCliente;
        //CALCULANDO OS DOIS ROIS, RECOMENDADO E EM BASE DOS NUMEROS DO CLIENTE
        roi = ((economiaComSolucao - custoSolucao)/custoSolucao) * 100;
        var roiCliente = ((economiaComSolucao - custoSolucaoCliente)/custoSolucaoCliente) * 100;
        
        //MOSTRANDO O PREJUIZO POR INCIDENTE, QUANTOS INCIDENTES ELE SOFRE E O GASTO POTENCIAL EM UM ANO
        div_msg.innerHTML = `<h1>PREJUÍZOS</h1><h1>Seu gasto por incidente é de <span style="color:red">R$${custoPorUmIncidente}</span><br>O gasto potencial anual com os incidentes em sua empresa<br> Considerando que você tem <span style="color:blue">${qtdIncidentes}</span> incidentes por ano é de <span style="color:red">R$${custoPotencialPorAno}</span></h1>
        `;
        
        //VERIFICANDO QUAL RETORNO SERÁ MAIOR, O COM OS SENSORES RECOMENDADOS E COM OS SENSORES INFORMADO PELO USUARIO, O QUE FOR MAIOR SERÁ EXIBIDO
        if(roi >= roiCliente){
            //MATH.ROUND() -> ARREDONDA O NUMERO INSERIDO NOS PARENTESES, SE A CASA DECIMAL FOR DE 0.5 PARA CIMA, O NUMERO SERA ARREDONDADO
            // PARA SEU SUCESSOR, CASO SEJA MENOR SERA ARREDONDADO PARA SEU ANTECESSOR

                div_msg.innerHTML += `<h1>BENEFÍCIOS PARA ${Math.round(quantidadeSensoresIdeal)} SENSORES INSTALADOS(RECOMENDADO)</h1>
            <h1>Utilizando ${Math.round(quantidadeSensoresIdeal)} sensores, para cobrir ${areas} áreas criticas, cada uma tendo ${metrosArea} m³, totalizando em ${areas * metrosArea} m³</h1><h1>A redução de custos seria de 50%</h1><h1>o que nos levaria a uma economia de R$${economiaComSolucao} por ano</h1>`;

            //.TOFIXED(X) -> FUNÇÃO QUE LIMITA AS CASAS DECIMAIS DE UM NUMERO PARA UM NUMERO INFORMADO NOS PARENTESES
            div_msg.innerHTML += `<h1 style="color:blue">ROI(retorno sobre investimento) de ${roi.toFixed(2)}%</h1>`

        }else{
        div_msg.innerHTML += `<h1>BENEFÍCIOS PARA ${sensores} SENSORES INSTALADOS</h1>
        <h1>Utilizando ${sensores} sensores, para cobrir ${areas} áreas criticas, cada uma tendo ${metrosArea} m³, totalizando em ${areas * metrosArea} m³</h1><h1>A redução de custos seria de ${porcentagemClienteSensores.toFixed(2)}%</h1><h1>o que nos levaria a uma economia de R$${economiaComSolucaoCliente} por ano</h1>`;


        div_msg.innerHTML += `<h1 style="color:blue">ROI(retorno sobre investimento) de ${roiCliente.toFixed(2)}%</h1>`
        }

       
        
    }
</script>